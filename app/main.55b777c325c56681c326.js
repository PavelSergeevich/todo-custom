(()=>{"use strict";var e="todos";function t(){var t=sessionStorage.getItem(e);return t?JSON.parse(t):[]}function o(){var e=document.querySelector(".list-placeholder");t().length>0?e.style.display="none":e.style.display="flex"}var n=function(n,d){o();var s=document.createElement("li");s.classList.add("todo-item"),d&&s.classList.add("todo-item_completed");var i=document.createElement("span");i.innerText=n,i.classList.add("todo-text"),s.appendChild(i);var r=document.createElement("button");return r.innerHTML='<i class="fas fa-times"></i>',r.classList.add("todo-remove-button"),r.addEventListener("click",function(n){return function(d){d.preventDefault(),confirm("Are you sure?")&&(n.classList.add("todo-item_fall"),n.addEventListener("transitionend",(function(){!function(o){var n=t(),d=Array.from(o.childNodes).find((function(e){return e.classList.contains("todo-text")}));if(d){var s=n.filter((function(e){return e!==d.innerText}));sessionStorage.setItem(e,JSON.stringify(s))}}(n),n.remove(),o()})))}}(s)),s.appendChild(r),s};function d(){return{todoInput:document.querySelector(".todo-input"),todoHelper:document.querySelector(".todo-helper"),todoHelperMax:document.querySelector(".todo-helper-max"),todoButton:document.querySelector(".todo-button")}}function s(e){var t=d(),o=t.todoInput,n=t.todoHelper,s=t.todoHelperMax,i=t.todoButton;i.classList.add("todo-button_disabled"),o.addEventListener("focus",(function(){n.classList.add("todo-helper_visible")})),o.addEventListener("blur",(function(){n.classList.remove("todo-helper_visible")})),o.addEventListener("keypress",(function(e){13===e.keyCode&&o.value.length<3&&e.preventDefault()})),o.addEventListener("input",(function(){o.value.length>=3?(i.classList.remove("todo-button_disabled"),n.classList.remove("todo-helper_visible")):(i.classList.add("todo-button_disabled"),n.classList.add("todo-helper_visible")),o.value.length<=15?(i.classList.remove("todo-button_disabled"),s.classList.remove("todo-helper-max_visible")):(i.classList.add("todo-button_disabled"),s.classList.add("todo-helper-max_visible"))}))}document.querySelector(".todo-input-wrapper");var i=d(),r=i.todoInput,a=i.todoButton,l=document.querySelector(".todo-list"),u=document.querySelector(".search-input");document.addEventListener("DOMContentLoaded",(function(){t().forEach((function(e){var t=n(e);l.appendChild(t)})),s(),o()})),r.addEventListener("input",s),a.addEventListener("click",(function(o){var s,i;o.preventDefault(),s=r.value,(i=t()).push(s),sessionStorage.setItem(e,JSON.stringify(i));var a=n(r.value);l.appendChild(a),function(e){var t=d(),o=t.todoInput,n=t.todoHelper;t.todoButton.classList.add("todo-button_disabled"),n.classList.add("todo-helper_visible"),o.value=""}()})),u.addEventListener("input",(function(e){l.childNodes.forEach((function(e){!function(e,t,o){var n,d=t.toLowerCase().split(""),s=e.toLowerCase().split("");return n=s,!!d.every((function(e){return n.includes(e)}))}(e.innerText,u.value)?e.style.display="none":e.style.display="flex"}))}))})();