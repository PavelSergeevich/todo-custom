(()=>{"use strict";var e="todos";function t(){var t=sessionStorage.getItem(e);return t?JSON.parse(t):[]}function o(){var e=document.querySelector(".todo-select-wrapper"),o=document.querySelector(".todo-select");console.log("chekSelect",t().length),t().length>0?(e.classList.remove("todo-select-wrapper_disabled"),e.classList.remove("todo-select-wrapper_disabled::after"),o.classList.remove("todo-select_disabled")):(e.classList.add("todo-select-wrapper_disabled"),e.classList.add("todo-select-wrapper_disabled::after"),o.classList.add("todo-select_disabled"))}var n=function(n){var d=document.createElement("li");d.classList.add("todo-item");var s=document.createElement("span");s.innerText=n,s.classList.add("todo-text"),d.appendChild(s);var a=document.createElement("button");a.innerHTML='<i class="fas fa-check"></i>',a.classList.add("todo-check-button"),a.addEventListener("click",function(e){return function(t){t.preventDefault(),e.classList.toggle("todo-item_completed")}}(d)),d.appendChild(a);var i=document.createElement("button");return i.innerHTML='<i class="fas fa-trash"></i>',i.classList.add("todo-remove-button"),i.addEventListener("click",function(n){return function(d){d.preventDefault(),n.classList.add("todo-item_fall"),n.addEventListener("transitionend",(function(){!function(o){var n=t(),d=Array.from(o.childNodes).find((function(e){return e.classList.contains("todo-text")}));if(d){var s=n.filter((function(e){return e!==d.innerText}));sessionStorage.setItem(e,JSON.stringify(s))}}(n),n.remove(),o()}))}}(d)),d.appendChild(i),d};function d(){return{todoInput:document.querySelector(".todo-input"),todoHelper:document.querySelector(".todo-helper"),todoButton:document.querySelector(".todo-button")}}function s(e){var t=d(),o=t.todoInput,n=t.todoHelper,s=t.todoButton;s.classList.add("todo-button_disabled"),o.addEventListener("focus",(function(){n.classList.add("todo-helper_visible")})),o.addEventListener("blur",(function(){n.classList.remove("todo-helper_visible")})),o.addEventListener("keypress",(function(e){13===e.keyCode&&o.value.length<3&&e.preventDefault()})),o.addEventListener("input",(function(){o.value.length>=3?(s.classList.remove("todo-button_disabled"),n.classList.remove("todo-helper_visible")):(s.classList.add("todo-button_disabled"),n.classList.add("todo-helper_visible"))}))}document.querySelector(".todo-input-wrapper");var a=d(),i=a.todoInput,l=a.todoButton,r=document.querySelector(".todo-list"),c=document.querySelector(".todo-select");document.addEventListener("DOMContentLoaded",(function(){t().forEach((function(e){var t=n(e);r.appendChild(t)})),s(),o()})),i.addEventListener("input",s),l.addEventListener("click",(function(s){var a,l;s.preventDefault(),a=i.value,(l=t()).push(a),sessionStorage.setItem(e,JSON.stringify(l));var c=n(i.value);r.appendChild(c),function(e){var t=d(),o=t.todoInput,n=t.todoHelper;t.todoButton.classList.add("todo-button_disabled"),n.classList.add("todo-helper_visible"),o.value=""}(),o()})),c.addEventListener("change",(function(e){var t,o;t=r.childNodes,o=e.target.value,t.length&&t.forEach((function(e){switch(o){case"completed":e.classList.contains("todo-item_completed")?e.style.display="flex":e.style.display="none";break;case"uncompleted":e.classList.contains("todo-item_completed")?e.style.display="none":e.style.display="flex";break;default:return void(e.style.display="flex")}}))}))})();